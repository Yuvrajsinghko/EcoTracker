<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Daily Entry</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background:url(/static/images/img3.png) no-repeat center center/cover ;
            min-height: 100vh;
            padding: 20px 0;
        }
        .edit-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .section-header {
            border-bottom: 2px solid #e9ecef;
            margin: 25px 0 15px 0;
            padding-bottom: 8px;
        }
        .nav-buttons {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <!-- Navigation Buttons -->
    <div class="nav-buttons">
        <a href="/" class="btn btn-primary">üè† Home</a>
    </div>
    
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="edit-card p-4">
                    <h2 class="text-center mb-2">‚úèÔ∏è Edit Daily Entry</h2>
                    <p class="text-center text-muted mb-4">Date: {{ entry.date_of_entry }}</p>
                    
                    <form method="POST" id="editForm">
                        
                        <!-- Transport Section -->
                        <h5 class="text-primary section-header">üöó Transport</h5>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Mode of Transport</label>
                                <select class="form-select" name="vehicle" required>
                                    {% for option in ['None', 'Car', 'Bus', 'Train', 'Bicycle', 'Walking', 'Motorbike'] %}
                                        <option value="{{ option }}" {{ 'selected' if entry.mode_of_transport == option else '' }}>{{ option }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Distance (km)</label>
                                <input type="number" class="form-control" name="distance" value="{{ entry.distance_travelled }}" min="0" step="0.1">
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Fuel Type</label>
                                <select class="form-select" name="fuel" required>
                                    {% for option in ['None', 'Petrol', 'Diesel', 'Electric', 'Hybrid', 'CNG'] %}
                                        <option value="{{ option }}" {{ 'selected' if entry.fuel_type == option else '' }}>{{ option }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Years Owned</label>
                                <input type="number" class="form-control" name="years_owned" value="{{ entry.years_owned }}" min="0">
                            </div>
                        </div>

                        <!-- Diet Section -->
                        <h5 class="text-success section-header">ü•ó Diet</h5>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Diet Type</label>
                                <select class="form-select" name="diet" required>
                                    {% for option in ['Vegetarian', 'Vegan', 'Non-Vegetarian'] %}
                                        <option value="{{ option }}" {{ 'selected' if entry.diet_type == option else '' }}>{{ option }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Meals/Day</label>
                                <input type="number" class="form-control" name="meals" value="{{ entry.meals_per_day }}" min="1" max="10">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Food Source</label>
                                <select class="form-select" name="food_source" required>
                                    {% for option in ['Local Market', 'Supermarket', 'Home Grown', 'Restaurant'] %}
                                        <option value="{{ option }}" {{ 'selected' if entry.food_source == option else '' }}>{{ option }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>

                        <!-- Utilities Section -->
                        <h5 class="text-warning section-header">‚ö° Utilities</h5>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Electricity (kWh)</label>
                                <input type="number" class="form-control" name="electric_consumption" value="{{ entry.electricity_consumption }}" min="0" step="0.1">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Water (L/day)</label>
                                <input type="number" class="form-control" name="water_consumption" value="{{ entry.water_consumption }}" min="0">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Gas (kg)</label>
                                <input type="number" class="form-control" name="gas_consumption" value="{{ entry.gas_usage }}" min="0" step="0.1">
                            </div>
                        </div>

                        <!-- Lifestyle Section -->
                        <h5 class="text-danger section-header">üè† Lifestyle</h5>
                        <div class="row">
                            <div class="col-md-3 mb-3">
                                <label class="form-label">Plastic Items</label>
                                <input type="number" class="form-control" name="plastic_items" value="{{ entry.plastic_item_used }}" min="0">
                            </div>
                            <div class="col-md-3 mb-3">
                                <label class="form-label">Smoking/day</label>
                                <input type="number" class="form-control" name="smoking" value="{{ entry.smoking }}" min="0">
                            </div>
                            <div class="col-md-3 mb-3">
                                <label class="form-label">Drinks/day</label>
                                <input type="number" class="form-control" name="alcohol_consumption" value="{{ entry.alcohol_consume }}" min="0">
                            </div>
                            <div class="col-md-3 mb-3">
                                <label class="form-label">Gym (hrs)</label>
                                <input type="number" class="form-control" name="gym" value="{{ entry.gym_hours }}" min="0" step="0.5" max="24">
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="d-flex gap-2 justify-content-end mt-4">
                            <a href="{{ url_for('entries_overview') }}" class="btn btn-outline-secondary">
                                ‚ùå Cancel
                            </a>
                            <button type="submit" class="btn btn-success">
                                üíæ Update Entry
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Unsaved changes warning
        let hasChanges = false;
        
        document.querySelectorAll('input, select').forEach(el => {
            el.addEventListener('input', () => hasChanges = true);
        });
        
        window.addEventListener('beforeunload', e => {
            if (hasChanges) {
                e.preventDefault();
                e.returnValue = 'Unsaved changes will be lost!';
            }
        });
        
        document.getElementById('editForm').addEventListener('submit', () => {
            hasChanges = false;
        });
    </script>
</body>
</html>
